\documentclass[a4j,titlepage]{jarticle}
\usepackage[dvipdfmx]{graphicx}
\usepackage{ascmac}
\usepackage{url}
\usepackage{multirow}


\title{呑兵衛土佐巡\\
内部設計書\\
第2版}
\author{株式会社Spirytus}
\date{\today}

\begin{document}
\maketitle
\tableofcontents

\clearpage

\section{概要}
\subsection{動作環境}
動作環境は、以下のブラウザを推奨しています。
\begin{itemize}
\item Chrome 47.0
\item Safari 5.1.10
\item Opera 33.0
\item IE 11.0
\item Fireforx 42.0
\end{itemize}

\subsection{開発環境}
開発環境は、以下のOSを使用しています。
\begin{itemize}
\item centOS 6.5
\item Mac OSX
\end{itemize}

\subsection{使用言語}
本システムでは、以下の言語を使用し開発しています。
\begin{itemize}
\item HTML5
\item CSS3
\item JavaScript
\item Ruby 2.2.3
\end{itemize}

\subsection{使用フレームワーク}
本システムでは、以下のフレームワークを使用しています。
\begin{itemize}
\item Bootstrap 3.3.6
\item jQuery 2.1.4
\item Ruby on Rails 4.2.4
\end{itemize}


\section{コーディング規約}
​
\subsection{コーディング規約}
本システムを作成する際には、以下の規約に則ってコーディングを行います。
\begin{description}
\item[HTML、CSS]\mbox{}\\
HTML及びCSSは、「Google HTML/CSS Style Guide」に従ってコーディングを行います。\\
(参考:https://google.github.io/styleguide/htmlcssguide.xml)
​
\item[JavaScript]\mbox{}\\
JavaScriptは、「Google JavaScript Style Guide」に従ってコーディングを行います。\\
(参考:https://google.github.io/styleguide/javascriptguide.xml)
​
\item[Ruby]\mbox{}\\
Rubyは、「ruby-style-guide」に従ってコーディングを行います。\\
(参考:https://github.com/bbatsov/ruby-style-guide)
​
\item[Ruby on Rails]\mbox{}\\
Ruby on Railsは、コーディング解析ツール「RuboCop」を使用してコードのチェックを行います。
(参考:https://github.com/bbatsov/rubocop)
\end{description}

\subsection{モジュール一覧}
本システムを構成するモジュールは、以下の通りです。
\begin{enumerate}
\item [SEARCH] : データベースから検索条件にあった情報を取得するモジュール
\item [REGISTER] : データベースに情報を登録するモジュール
\item [LOGIN] : ログインする処理を行なうモジュール
\item [CHECK] : データベースから情報を取得する際、データが正しいか確認するモジュール
\item [DIRECT MAIL] : メールを送信するモジュール
\item [DELETE] : データベースに登録している情報を削除するモジュール
\item [ALGORITHM] : 計算するモジュール
\item [MULTI MODULE] : 複数のモジュールを組み合わせるモジュール
\item [ERROR] : エラーが起こったときに行なうモジュール
\end{enumerate}

\clearpage

\subsection{モジュール定義}
各言語において実現したい機能、および共通の機能は以下の通りです。

\subsubsection{HTML}
\begin{description}
\item [title]~\\
画面のタイトルは以下の通りです。

\begin{itemize}
\item 呑兵衛土佐巡
\item 「酒類 味 アルコール度数」のお酒 呑兵衛土佐巡
\item 高知の「食材の種類名」 呑兵衛土佐巡
\item 「酒名or食材名or郷土料理名or観光地名」に該当する店舗 呑兵衛土佐巡
\item 「検索ワード」の検索結果 呑兵衛土佐巡
\item 「酒名」詳細情報 呑兵衛土佐巡
\item 「酒名」レビュー 呑兵衛土佐巡
\item 「店舗名」詳細情報 呑兵衛土佐巡
\item 「店舗名」レビュー 呑兵衛土佐巡
\item 高知の観光地一覧 呑兵衛土佐巡
\item ユーザ登録 呑兵衛土佐巡
\item ユーザログイン 呑兵衛土佐巡
\item マイページ 呑兵衛土佐巡
\item マイページ お気に入り一覧 呑兵衛土佐巡
\item マイページ お気に入り削除 呑兵衛土佐巡
\item マイページ レビュー一覧 呑兵衛土佐巡
\item マイページ レビュー削除 呑兵衛土佐巡
\item マイページ設定 呑兵衛土佐巡
\item 店舗登録申請 呑兵衛土佐巡
\item 店舗登録 呑兵衛土佐巡
\item 店舗ログイン 呑兵衛土佐巡
\item 店舗マイページ 呑兵衛土佐巡
\item 店舗マイページ レビュー一覧 呑兵衛土佐巡
\item 店舗マイページ設定 呑兵衛土佐巡
\end{itemize}

\item [meta]~\\
metaタグは以下の通りです。

\begin{itemize}
\item \textless meta charset="utf-8"\textgreater
\end{itemize}


\item [link]~\\
linkタグは以下の通りです。

\begin{itemize}
\item \textless link rel="stylesheet" href=".css" type="text/css"\textgreater
\end{itemize}


\item [script]~\\
scriptタグは以下の通りです。

\begin{itemize}
\item \textless script type="text/javascript" src=".js"\textgreater \textless /script\textgreater
\end{itemize}

\end{description}

\subsubsection{CSS}
\begin{description}
\item[ロールオーバー]~\\
別画面へ遷移するボタンや画像にマウスポインタを当てたときに、色や画像が切り替わる機能を適用します。
この機能を用いることで、別画面に遷移するボタンや画像を、ユーザが簡単に判断することができます。
CSSより、background-imageの切り替えを行うことで、ロールオーバーを実現します。

\item [フォント]~\\
フォントは以下の２種類です。

\begin{itemize}
\item serif
\item cursive
\end{itemize}

\item [フォントサイズ]~\\
フォントは%指定で以下の3種類です。

\begin{itemize}
\item お酒、食材、観光地、店舗の説明文を100%
\item 題名を150%
\item 題名の赤文字200%
\end{itemize}


\item [class]~\\
汎用的に使用するclassは以下の3種類です。

\begin{itemize}
\item ロゴ(クリックするとTopページに戻る)
\item デザイン
\item ページTopへ戻るボタン
\end{itemize}

\end{description}


\subsubsection{JavaScript}
\begin{description}
\item [プルダウン]~
  \begin{description}
    \item [メソッド名] : pullDown
    \item [使用するライブラリ] : jQuery
    \item [処理] : jQueryのclick()プロパティを使用しクリックされると項目が出現するようになります。
  \end{description}

\item [画像の自動切り替え（スライド）]~
  \begin{description}
    \item [メソッド名] : imgSlide
    \item [使用するライブラリ] : jQuery、SLIDEJS
    \item [処理] : SLIDEJSを読み込みます。
    その後、設定を追加します。
    navigationクラスの変数名activeをfalseに変更します。
    playクラスの変数名activeをfalseに変更します。
  \end{description}

\item[画像の自動切り替え（フェード）]~
  \begin{description}
    \item [メソッド名] : imgFade
    \item [使用するライブラリ] : jQuery
    \item [処理] : addClase()で現在表示している画像にactiveクラスを追加します。
    setInterval()を使用し画像が何秒おきに切り替わるか設定します。
    activeクラスをfadeOut()で、フェードアウトさせ、activeクラスを削除します。
    その後、次に表示させる画像をfadeIn()で、フェードインさせactiveクラスを追加します。
  \end{description}

\item[星での評価]~
  \begin{description}
    \item [メソッド名] : starReview
    \item [使用するライブラリ] : jQuery、Raty
    \item [処理] : Ratyを読み込ませます。
    raty()プロパティを呼び出します。
  \end{description}

\item[タブ切り替え]~\\
\begin{description}
\item メソッド：changTab
\item ライブラリ：jQuery
\item 処理
\item Click()で処理を呼び出す
\item Index()で対応する番号を取り出す
\item その番号を対応するリストをeq()で探し、CSSを変更する
\item 現在のselectクラスを削除し、新しいselectクラスを追加する
\end{description}

\item[説明画面出力(lightbox)]~
  \begin{description}
    \item [メソッド名] : showInfo
    \item [使用するライブラリ] : jQuery
    \item [処理] : click()プロパティを使用し、処理が開始されます。
    blur()を使用し、モーダルウィンドウが多重起動しないように設定します。
    append()プロパティを使用し、HTMLの末尾にdivタグを生成します。
    fadeIn()で先ほど生成したdivタグをフェードインさせます。
    centeringModalSyncer()メソッドを作成し、表示位置を中央に設定します。
  \end{description}

\item[Topに戻るボタン]~
  \begin{description}
    \item [メソッド名] : retrunTop
    \item [使用するライブラリ] : jQuery
    \item [処理] : click()プロパティを使用し、animate()プロパティを呼び出します。
  \end{description}


\item[十字チャートでの評価]~\\
\begin{description}
\item メソッド：crossReviw
\item JavaScriptを使って図形を描くために使われる新しいHTML要素の一つであるcanvas要素を用います。
以下はパスを使用して図形を描くための命令です
\item beginPath() – パスを開始します
\item closePath() – パスを閉じます(始点に向けて直線を描くことで図形を閉じます)
\item stroke() – 線でパスを描きます
\item moveTo(x, y) – パスの始点を移動します
\item lineTo(x, y) – 現在の始点の座標(x, y)に向けて直線を描きます
\item 項目をつけるのにfillText()を使用します
\item 画像つけるのにimageオブジェクトを生成し、drowimageで画像の表示
\item 引数：レビューの平均値を取ってくる
\item 出力：レビューグラフを表示
\end{description}

\item[レーダーチャート]~\\
\begin{description}
\item メソッド：radarCloss
\item ライブラリ：radar.js
\item 処理
\item Onloadでページが呼び出された時に処理が行われるようにする
\item New html5jp.graph.radar()を変数に格納する
\item 配列を作成し、最初の要素に項目名と数値を格納した配列として定義する
\item オブジェクトを作成し、aCapプロパティで項目を指定する
\item Drawで要素と数値を引数にし、グラフを作成
\item 引数：レビューの平均値を取ってくる
\item 出力：レビューグラフを表示
\end{description}

\end{description}

\newpage
\section{ルーティング}
本システムの各ページへのルーティングと対応するコントローラは、表\ref{routing}の通りです。

\begin{table}[!htbp]
\caption{ルーティング一覧}
\label{routing}
\small
\begin{center}
\begin{tabular}{|l|l|l|p{4cm}|}\hline
ページ内容 & ルーティング & HTTPメソッド & 対応するコントローラ\\\hline\hline
トップページ & / & GET & \multirow{6}{*}{Indexesコントローラ} \\\cline{1-3}
検索（お酒） & /drink?検索条件 & GET & \\\cline{1-3}
検索（食材） & /food?検索条件 & GET & \\\cline{1-3}
検索（店舗） & /store?検索条件 & GET &  \\\cline{1-3}
検索（観光地等） & /resort?検索条件 & GET & \\\cline{1-3}
検索（語句） & /search?検索語句 & GET & \\\hline
\multirow{2}{*}{お酒（詳細）} & \multirow{2}{*}{/:drink\_name}
& GET & \multirow{4}{*}{Drinksコントローラ} \\\cline{3-3}
 & & POST &  \\\cline{1-3}
\multirow{2}{*}{お酒（レビュー）} & \multirow{2}{*}{/:drink\_name/review}
& GET & \\\cline{3-3}
 & & POST & \\\hline
\multirow{2}{*}{店舗（詳細）} & \multirow{2}{*}{/store/:store\_name}
& GET & \multirow{4}{*}{Storesコントローラ} \\\cline{3-3}
 & & POST &  \\\cline{1-3}
\multirow{2}{*}{店舗（レビュー）}& \multirow{2}{*}{/store/:store\_name/review}
& GET &  \\\cline{3-3}
 & & POST &\\\hline
\multirow{2}{*}{ユーザ登録} & \multirow{2}{*}{/user}
& GET & \multirow{12}{*}{Userコントローラ} \\\cline{3-3}
 & & POST & \\\cline{1-3}
 \multirow{2}{*}{ログイン（ユーザ）} & \multirow{2}{*}{/login}
 & GET & \\\cline{3-3}
 & & POST & \\\cline{1-3}
マイページ（トップ） & /:user\_name
& GET & \\\cline{1-3}
\multirow{2}{*}{マイページ（お気に入り）} & /:user\_name/favorites
& GET & \\\cline{2-3}
 & /:user\_name/favorites/:favorite\_id & DELETE & \\\cline{1-3}
\multirow{2}{*}{マイページ（レビュー）} & /:user\_name/reviews
& GET & \\\cline{2-3}
 & /user\_name/reviews/:review\_id & DELETE & \\\cline{1-3}
\multirow{3}{*}{マイページ（設定）} & \multirow{3}{*}{/:user\_name/config}
& GET & \\\cline{3-3}
 & & POST & \\\cline{3-3}
 & & DELETE & \\\hline
 \multirow{2}{*}{店舗登録申請} & \multirow{2}{*}{/omise/request}
 & GET & \multirow{13}{*}{Storeコントローラ} \\\cline{3-3}
  & & POST &\\\cline{1-3}
 \multirow{2}{*}{店舗登録} & \multirow{2}{*}{/omise}
 & GET &\\\cline{3-3}
  & & POST &\\\cline{1-3}
 \multirow{2}{*}{ログイン（店舗）} & \multirow{2}{*}{/omise/login}
 & GET & \\\cline{3-3}
  & & POST & \\\cline{1-3}
\multirow{3}{*}{店舗マイページ（編集）}& \multirow{3}{*}{/omise/:store\_name}
& GET & \\\cline{3-3}
 & & POST & \\\cline{3-3}
 & & DELETE & \\\cline{1-3}
店舗マイページ（レビュー） & /omise/:store\_name/reviews
& GET & \\\cline{1-3}
\multirow{3}{*}{店舗マイページ（設定）} & \multirow{3}{*}{/omise/:store\_name/config}
& GET & \\\cline{3-3}
 & & POST & \\\cline{3-3}
 & & DELETE & \\\hline
\end{tabular}
\end{center}
\end{table}

\section{コントローラ}
本システムで作成し、使用するコントローラは表\ref{controller}の通りです。

\begin{table}[!htbp]
\caption{コントローラ一覧}
\label{controller}
\small
\begin{center}
\begin{tabular}{|l|p{5cm}|}\hline
コントローラ名 & 詳細 \\\hline\hline
\multirow{2}{*}{Indexes} & トップページ、検索に関するコントローラです。 \\\hline
Users & ユーザに関するコントローラです。 \\\hline
Stores & 店舗に関するコントローラです。 \\\hline
Drinks & お酒に関するコントローラです。 \\\hline
\end{tabular}
\end{center}
\end{table}

\section{モデル}

本システムで作成し、使用するモデルは表\ref{model}の通りです。

\begin{table}[!htbp]
\caption{モデル一覧}
\label{model}
\small
\begin{center}
\begin{tabular}{|l|l|l|p{5cm}|}\hline
モデル名 & \multicolumn{2}{|l|}{リレーション} & 詳細 \\\hline\hline
\multirow{4}{*}{User} & Store & N:M & \multirow{4}{*}{ユーザに関するモデルです。}\\\cline{2-3}
 & Drink & N:M & \\\cline{2-3}
 & StoreReview & 1:N & \\\cline{2-3}
 & DrinkReview & 1:N & \\\hline
\multirow{3}{*}{Store} & User & N:M & \multirow{4}{*}{店舗に関するモデルです。} \\\cline{2-3}
 & Drink & N:M & \\\cline{2-3}
 & Dish & N:M & \\\cline{2-3}
 & StoreReview & 1:N & \\\hline
\multirow{5}{*}{Drink} & User & N:M & \multirow{5}{*}{お酒に関するモデルです。} \\\cline{2-3}
 & Store & N:M & \\\cline{2-3}
 & Brewer & N:1 & \\\cline{2-3}
 & Alcoholic & N:1 & \\\cline{2-3}
 & DrinkReview & 1:N & \\\hline
\multirow{2}{*}{Dish} & Store & N:M & \multirow{2}{*}{料理に関するモデルです。} \\\cline{2-3}
 & Ingredient & N:M & \\\hline
Ingredient & Dish & N:M & 食材に関するモデルです。 \\\hline
Brewer & Drink & 1:N & 酒蔵に関するモデルです。 \\\hline
Alcoholic & Drink & 1:N & 酒類に関するモデルです。 \\\hline
\multirow{2}{*}{StoreReview} & User & N:1 & \multirow{2}{*}{店舗のレビューに関するモデルです。} \\\cline{2-3}
 & Store & N:1 & \\\hline
\multirow{2}{*}{DrinkReview} & User & N:1
\multirow{2}{*}{お酒のレビューに関するモデルです。} \\\cline{2-3}
 & Drink & N:1 & \\\hline
Resort & & & 観光地に関するモデルです。 \\\hline
\end{tabular}
\end{center}
\end{table}


\section{ビュー}
本システムで作成し、使用するビューは表\ref{view}の通りです。

\begin{table}[!htbp]
\caption{ビュー一覧}
\label{view}
\small
\begin{center}
\begin{tabular}{|l|l|p{4cm}|}\hline
ビュー名 & ルーティング & 詳細\\\hline\hline
indexes/index.html.erb & / & トップページです。 \\\hline
\multirow{4}{*}{indexes/search.html.erb} & /drink?検索条件 & \multirow{4}{*}{検索結果ページです。} \\\cline{2-2}
& /food?検索条件 & \\\cline{2-2}
& /store?検索条件 & \\\cline{2-2}
& /resort?検索条件 & \\\hline
drinks/show.html.erb & /:drink\_name & お酒の詳細ページです。\\\hline
drinks/review.html.erb & /:drink\_name/reviews & お酒のレビューページです。 \\\hline
stores/show.html.erb & /store/:store\_name & 店舗の詳細ページです。 \\\hline
stores/review.html.erb & /store/:store\_name/reviews & 店舗のレビューページです。 \\\hline
users/registration.html.erb & /user & ユーザ用の登録ページです。 \\\hline
\multirow{2}{*}{users/login.html.erb} & \multirow{2}{*}{/login} & ユーザ用のログインページです。 \\\hline
\multirow{2}{*}{users/index.html.erb} & \multirow{2}{*}{/:user\_name} & ユーザのマイページのトップページです。 \\\hline
\multirow{2}{*}{users/favorite.html.erb}  & \multirow{2}{*}{/:user\_name/favorites} & ユーザのマイページのお気に入りページです。 \\\hline
\multirow{2}{*}{users/review.html.erb} & \multirow{2}{*}{/:user\_name/reviews} & ユーザのマイページのレビューページです。 \\\hline
\multirow{2}{*}{users/config.html.erb} & \multirow{2}{*}{/:user\_name/config} & ユーザのマイページの詳細設定用ページです。 \\\hline
stores/request.html.erb & /omise/request & 店舗の登録申請ページです。 \\\hline
stores/registration.html.erb & /omise & 店舗用の登録ページです。 \\\hline
stores/login.html.erb & /omise/login & 店舗用のログインページです。\\\hline
\multirow{2}{*}{stores/index.html.erb} & \multirow{2}{*}{/omise/:store\_name} & 店舗のマイページのトップページです。 \\\hline
\multirow{2}{*}{stores/review.html.erb} & \multirow{2}{*}{/omise/:store\_name/reviews} & 店舗のマイページのレビューページです。 \\\hline
\multirow{2}{*}{stores/config.html.erb} & \multirow{2}{*}{/omise/:store\_name/config} & 店舗のマイページの詳細設定用ページです。 \\\hline
\end{tabular}
\end{center}
\end{table}

\clearpage

\section{ライブラリ}
本システムで使用するライブラリは、表\ref{library}の通りです。

\begin{table}[!htbp]
\caption{ライブラリ一覧}
\label{library}
\small
\begin{center}
\begin{tabular}{|l|p{6cm}|}\hline
ライブラリ名 & 詳細 \\\hline\hline
\multirow{2}{*}{Devise} & ユーザ登録に関する機能を提供してくれるライブラリです。\\\hline
\multirow{3}{*}{RMagick} & CarrierWaveと組み合わせることで、画像アップロード時にサムネイルを作成する機能などを提供してくれるライブラリです。\\\hline
\multirow{2}{*}{CarrierWave} & ファイルアップロードに関する機能を提供してくれるライブラリです。\\\hline
\multirow{2}{*}{Better\_Errors} & デバッグしやすいエラー画面を提供してくれるライブラリです。\\\hline
\multirow{2}{*}{factory\_girl\_rails} & 簡易なデータ作成機能を提供してくれるライブラリです。 \\\hline
\end{tabular}
\end{center}
\end{table}

\clearpage

\section{モデル定義}
本システムで作成し、使用するモデルの定義は次の通りです。

\subsection{User}
Userモデルは、StoreReviewモデル、DrinkReviewモデルと1:Nの関係にあります。
また、Storeモデル、DrinkモデルとN:Mの関係にあります。

Userモデルのカラムは、表\ref{user}の通りです。

\begin{table}[!htbp]
\caption{Userモデルの定義}
\label{user}
\small
\begin{center}
\begin{tabular}{|l|l|c|}\hline
カラム名 & 型 & null \\\hline\hline
name & text & \\\hline
email & string & \\\hline
password & string & \\\hline
\end{tabular}
\end{center}
\end{table}

\subsection{Store}
Storeモデルは、StoreReviewモデルと1:Nの関係にあります。
また、Userモデル、Drinkモデル、DishモデルとN:Mの関係にあります。

Storeモデルには、searchメソッドが存在します。

\begin{description}
\item [メソッド名 :] search
\item [入力 :] 検索パラメータ
\item [出力 :] 検索パラメータに合致するStoreのリスト
\item [処理 :]\mbox{}
  \begin{enumerate}
  \item 検索方法を判断する。
  \item 検索パラメータを入力に検索結果を抽出する。
  \item 検索結果をコントローラに返す。
  \end{enumerate}
\end{description}

Storeモデルのカラムは、表\ref{store}の通りです。

\begin{table}[!htbp]
\caption{Storeモデルの定義}
\label{store}
\small
\begin{center}
\begin{tabular}{|l|l|c|}\hline
カラム名 & 型 & null \\\hline\hline
name & text & \\\hline
email & string & \\\hline
password & string & \\\hline
address & text & \\\hline
phone\_number & string & \\\hline
budget & integer & $\circ$ \\\hline
detail & text & \\\hline
\end{tabular}
\end{center}
\end{table}

\subsection{Drink}
Drinkモデルは、DrinkReviewモデルと1:Nの関係にあります。
また、Brewerモデル、AlcoholicモデルとN:1の関係にあります。
さらに、Userモデル、StoreモデルとN:Mの関係にあります。

Drinkモデルには、searchメソッドが存在します。

\begin{description}
\item [メソッド名 :] search
\item [入力 :] 検索パラメータ
\item [出力 :] 検索パラメータに合致するDrinkのリスト
\item [処理 :]\mbox{}
  \begin{enumerate}
  \item 検索方法を判断する。
  \item 検索パラメータを入力に検索結果を抽出する。
  \item 検索結果をコントローラに返す。
  \end{enumerate}
\end{description}

Drinkモデルのカラムは、表\ref{drink}の通りです。

\begin{table}[!htbp]
\caption{Drinkモデルの定義}
\label{drink}
\small
\begin{center}
\begin{tabular}{|l|l|c|}\hline
カラム名 & 型 & null \\\hline\hline
name & text & \\\hline
alcohol & integer & $\circ$ \\\hline
detail & text & $\circ$ \\\hline
alcoholic\_id & integer & $\circ$ \\\hline
brewer\_id & integer & $\circ$ \\\hline
\end{tabular}
\end{center}
\end{table}

\subsection{Dish}
Dishモデルは、Storeモデル、IngredientモデルとN:Mの関係にあります。

Dishモデルのカラムは、表\ref{dish}の通りです。

\begin{table}[!htbp]
\caption{Dishモデルの定義}
\label{dish}
\small
\begin{center}
\begin{tabular}{|l|l|c|}\hline
カラム名 & 型 & null \\\hline\hline
name & text & \\\hline
local\_dishes & boolean & \\\hline
detail & text & $\circ$ \\\hline
\end{tabular}
\end{center}
\end{table}

\subsection{Ingredient}
Ingredientモデルは、DishモデルとN:Mの関係にあります。

Ingredientモデルのカラムは、表\ref{ingredient}の通りです。

\begin{table}[!htbp]
\caption{Ingredientモデルの定義}
\label{ingredient}
\small
\begin{center}
\begin{tabular}{|l|l|c|}\hline
カラム名 & 型 & null \\\hline\hline
name & text & \\\hline
\end{tabular}
\end{center}
\end{table}

\subsection{Brewer}
Brewerモデルは、Drinkモデルと1:Nの関係にあります。

Brewerモデルのカラムは、表\ref{brewer}の通りです。

\begin{table}[!htbp]
\caption{Brewerモデルの定義}
\label{brewer}
\small
\begin{center}
\begin{tabular}{|l|l|c|}\hline
カラム名 & 型 & null \\\hline\hline
name & text & \\\hline
\end{tabular}
\end{center}
\end{table}

\subsection{Alcoholic}
Alcoholicモデルは、Drinkモデルと1:Nの関係があります。

Alcoholicモデルのカラムは、表\ref{alcoholic}の通りです。

\begin{table}[!htbp]
\caption{Alcoholicモデルの定義}
\label{alcoholic}
\small
\begin{center}
\begin{tabular}{|l|l|c|}\hline
カラム名 & 型 & null \\\hline\hline
name & text &  \\\hline
item1 & text & \\\hline
item2 & text & \\\hline
item3 & text & $\circ$ \\\hline
item4 & text & $\circ$ \\\hline
item5 & text & $\circ$ \\\hline
item6 & text & $\circ$ \\\hline
\end{tabular}
\end{center}
\end{table}

\subsection{StoreReview}
StoreReviewモデルは、Userモデル、StoreモデルとN:1の関係にあります。

StoreReviewモデルのカラムは、表\ref{store_review}の通りです。
StoreReviewモデルの主キーは、user\_idとstore\_idです。

\begin{table}[!htbp]
\caption{StoreReviewモデルの定義}
\label{store_review}
\small
\begin{center}
\begin{tabular}{|l|l|c|}\hline
カラム名 & 型 & null \\\hline\hline
user\_id & integer & \\\hline
store\_id & integer & \\\hline
body & text & \\\hline
\end{tabular}
\end{center}
\end{table}

\subsection{DrinkReview}
DrinkReviewモデルは、Userモデル、DrinkモデルとN:1の関係にあります。

DrinkReviewモデルのカラムは、表\ref{drink_review}の通りです。
DrinkReviewモデルの主キーは、user\_idとdrink\_idです。

\begin{table}[!htbp]
\caption{DrinkReviewモデルの定義}
\label{drink_review}
\small
\begin{center}
\begin{tabular}{|l|l|c|}\hline
カラム名 & 型 & null \\\hline\hline
user\_id & integer & \\\hline
drink\_id & integer & \\\hline
body & text & \\\hline
param1 & integer & \\\hline
param2 & integer & \\\hline
param3 & integer & $\circ$ \\\hline
param4 & integer & $\circ$ \\\hline
param5 & integer & $\circ$ \\\hline
param6 & integer & $\circ$ \\\hline
\end{tabular}
\end{center}
\end{table}

\subsection{Resort}
Resortモデルの定義は、表\ref{resort}の通りです。

\begin{table}[!htbp]
\caption{Resortモデルの定義}
\label{resort}
\small
\begin{center}
\begin{tabular}{|l|l|c|}\hline
カラム名 & 型 & null \\\hline\hline
name & text & \\\hline
address & text & $\circ$ \\\hline
detail & text & \\\hline
\end{tabular}
\end{center}
\end{table}

\section{アクションメソッドの定義}
本システムで作成し、使用するコントローラのアクションメソッドは次の通りです。

\subsection{Indexesコントローラ}


\subsection{Userコントローラ}


\subsection{Storeコントローラ}
Storeコントローラのアクションは、次の通りです。

\begin{description}
\item [メソッド名：] show
\item [入力：] 店舗ID
\item [出力：] 店舗の詳細ページ
\item [処理：]\mbox{}
  \begin{enumerate}
  \item 店舗IDを入力に、店舗情報を抽出します。
  \item 店舗の詳細ページを出力します。
  \end{enumerate}
\end{description}
​
\begin{description}
\item [メソッド名：] review
\item [入力：] 店舗ID
\item [出力：] 店舗のレビューページ
\item [処理：]\mbox{}
  \begin{enumerate}
  \item 店舗IDを入力に、店舗のレビューを抽出します。
  \item 店舗のレビューページを出力します。
  \end{enumerate}
\end{description}
​
\begin{description}
\item [メソッド名：] review\_create
\item [入力：] レビューパラメータ
\item [出力：] 店舗のレビューページ
\item [処理：]\mbox{}
  \begin{enumerate}
  \item レビューパラメータを入力に、レビューを保存します。
  \item ページの更新を行います。
  \end{enumerate}
\end{description}
​
\begin{description}
\item [メソッド名：] favorite\_add
\item [入力：]
  \begin{enumerate}
    \item ユーザID
    \item 店舗ID
  \end{enumerate}
\item [出力：] HTTPステータスコード 200
\item [処理：] \mbox{}
  \begin{enumerate}
  \item HTTPステータスコード 200を出力します。
  \item ページを更新します。
　\end{enumerate}
\end{description}


\subsection{Drinkコントローラ}
Drinkコントローラのアクションは、次の通りです。

\begin{description}
\item [メソッド名：] show
\item [入力：] お酒ID
\item [出力：] お酒の詳細ページ
\item [処理：]\mbox{}
  \begin{enumerate}
  \item お酒のIDを入力に、お酒の詳細情報を抽出します。
  \item お酒の詳細ページを出力します。
  \end{enumerate}
\end{description}
​
\begin{description}
\item [メソッド名：] review
\item [入力：] お酒ID
\item [出力：] お酒のレビューページ
\item [処理：]\mbox{}
  \begin{enumerate}
  \item お酒のIDを入力に、お酒のレビューを抽出します。
  \item お酒のレビューページを出力します。
  \end{enumerate}
\end{description}
​
\begin{description}
\item [メソッド名：] review\_create
\item [入力：] レビューパラメータ
\item [出力：] お酒のレビューのページ
\item [処理：]\mbox{}
  \begin{enumerate}
  \item レビューパラメータを入力に、レビューを保存します。
  \item ページの更新を行います。
  \end{enumerate}
\end{description}
​
\begin{description}
\item [メソッド名：] favorite\_add
\item [入力：]
  \begin{enumerate}
    \item ユーザID
    \item 酒ID
  \end{enumerate}
\item [出力：] HTTPステータスコード 200
\item [処理：] \mbox{}
  \begin{enumerate}
  \item HTTPステータスコード 200を出力します。
  \item ページを更新します。
　\end{enumerate}
\end{description}

\end{document}
